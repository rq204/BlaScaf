@inject UserService UserService

<Menu Mode="MenuMode.Inline" Theme="MenuTheme.Light">
    @{
        foreach (BsMenuItem bsMenuItem in BsConfig.MenuItems)
        {
            if (bsMenuItem.Roles.Contains(UserService.Role))
            {
                <MenuItem Key="@bsMenuItem.Key" Icon="@bsMenuItem.Icon" RouterLink="@bsMenuItem.RouterLink" Title="@bsMenuItem.Title">@bsMenuItem.Title</MenuItem>
            }
        }
    }
</Menu>

@code {

    [Parameter]
    public bool Collapsed { get; set; }

    protected override void OnParametersSet()
    {
        StateHasChanged(); // ⭐ 强制刷新
    }

    protected override async Task OnInitializedAsync()
    {
        await UserService.LoadUserInfoAsync();
    }
}